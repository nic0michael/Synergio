This is a java 21 gradle springboot microservice with thymeleaf
## Existing code
I have this Model class:
package za.co.synergio.georgiou.model;

import java.math.BigDecimal;
import java.time.LocalDate;
import org.springframework.format.annotation.DateTimeFormat;

public class ServiceRecord {
	private int index;
	@DateTimeFormat(iso = DateTimeFormat.ISO.DATE)
    private LocalDate date;
	
	@DateTimeFormat(iso = DateTimeFormat.ISO.DATE)
    private LocalDate serviceDate;
	
	@DateTimeFormat(iso = DateTimeFormat.ISO.DATE)
    private LocalDate recurringDate;
	
    private String customerName;
    private String cellphone;
    private String vehicleRegNumber;
    private String odometerReading;   
    private String vinNumber;
    private String documentType;
    private String requirementCategory;
    private int interval;
    private int daysLeft;
    private String materialsRequired;
    private double labourHours;
    private BigDecimal amount;
    private String breakdown;
    private int state; //0=active 1=completed 3=deleted

    // --- Getters and Setters ---
    public int getIndex() { return index; }
    public void setIndex(int index) { this.index = index; }

    
    public LocalDate getDate() { return date; }
    public void setDate(LocalDate date) { this.date = date; }

    public LocalDate getServiceDate() { return serviceDate; }
    public void setServiceDate(LocalDate serviceDate) { this.serviceDate = serviceDate; }

    public LocalDate getRecurringDate() { return recurringDate; }
    public void setRecurringDate(LocalDate recurringDate) { this.recurringDate = recurringDate; }

    public String getCustomerName() { return customerName; }
    public void setCustomerName(String customerName) { this.customerName = customerName; }

    public String getCellphone() { return cellphone; }
    public void setCellphone(String cellphone) { this.cellphone = cellphone; }

    public String getVehicleRegNumber() { return vehicleRegNumber; }
    public void setVehicleRegNumber(String vehicleRegNumber) { this.vehicleRegNumber = vehicleRegNumber; }

    public String getOdometerReading() { return odometerReading; }
    public void setOdometerReading(String odometerReading) { this.odometerReading = odometerReading; }

    public String getVinNumber() { return vinNumber; }
    public void setVinNumber(String vinNumber) { this.vinNumber = vinNumber; }

    public String getDocumentType() { return documentType; }
    public void setDocumentType(String documentType) { this.documentType = documentType; }

    public String getRequirementCategory() { return requirementCategory; }
    public void setRequirementCategory(String requirementCategory) { this.requirementCategory = requirementCategory; }

    public int getInterval() { return interval; }
    public void setInterval(int interval) { this.interval = interval; }
    

    public int getDaysLeft() { return daysLeft; }
    public void setDaysLeftl(int daysLeft) { this.daysLeft = daysLeft; }


    public String getMaterialsRequired() { return materialsRequired; }
    public void setMaterialsRequired(String materialsRequired) { this.materialsRequired = materialsRequired; }

    public double getLabourHours() { return labourHours; }
    public void setLabourHours(double d) { this.labourHours = d; }

    public BigDecimal getAmount() { return amount; }
    public void setAmount(BigDecimal amount) { this.amount = amount; }

    public String getBreakdown() { return breakdown; }
    public void setBreakdown(String breakdown) { this.breakdown = breakdown; }
    

    public int getState() { return state; }
    public void setState(int state) { this.state = state; }
}


I have this HTML form: form.html:

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Service Record Form</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script defer th:src="@{/js/form.js}"></script>
</head>
<body>
	
<header>
	<div class="brand-title">Synergio</div>
    <h1>Vehicle Service Record</h1>
    <nav>
		<a th:href="@{/records}">View Records</a> | 
        <a th:href="@{/help}">Help</a>
    </nav>
</header>

<main>
	<a th:href="@{/records}" class="btn-link">View Records</a>
	<br><br>
	
    <form th:action="@{/submit}" th:object="${serviceRecord}" method="post" class="service-form">
        <label>Date:
			<input type="date" th:field="*{date}" required>		
        </label>

        <label>Customer Name:
            <input type="text" th:field="*{customerName}" required>
        </label>

        <label>Cellphone:
            <input type="tel" th:field="*{cellphone}">
        </label>

        <label>Vehicle Registration Number:
            <input type="text" th:field="*{vehicleRegNumber}" required>
        </label>

        <label>Vehicle Audometer Reading:
            <input type="text" th:field="*{audometerReading}">
        </label>

        <label>VIN Number:
            <input type="text" th:field="*{vinNumber}">
        </label>

        <label>Document Type:
            <select th:field="*{documentType}">
                <option value="Quotation">Quotation</option>
                <option value="Invoice">Invoice</option>
				<option value="Refund (Subject to approval)">Refund (Subject to approval)</option>
            </select>
        </label>

        <label>Vehicle Requirement Category:
            <select th:field="*{requirementCategory}">
                <option value="Oil Change">Oil Change</option>
                <option value="Service">Service</option>
                <option value="General / Safety Inspection">General / Safety Inspection</option>
                <option value="Brake Check">Brake Check</option>
				<option value="Repair">Repair</option>
				<option value="Engine Diagnostics">Engine Diagnostics</option>
				<option value="Electrical System">Electrical System</option>
				<option value="Battery Replacement">Battery Replacement</option>
				<option value="Cooling System / Radiator">Cooling System / Radiator</option>
				<option value="Transmission / Clutch">Transmission / Clutch</option>
				<option value="Suspension / Steering">Suspension / Steering</option>
				<option value="Tire Replacement / Rotation">Tire Replacement / Rotation</option>
				<option value="Wheel Alignment / Balancing">Wheel Alignment / Balancing</option>
				<option value="Fuel System">Fuel System</option>
				<option value="Timing Belt / Chain">Timing Belt / Chain</option>
				<option value="Lights / Indicators">Lights / Indicators</option>
				<option value="Wipers / Washer System">Wipers / Washer System</option>
				<option value="Other">Other</option>
				
				
				
            </select>
        </label>

        <label>Interval (Days / Months / KMs):
            <input type="text" th:field="*{interval}">
        </label>

        <label>Materials Required:
            <input type="text" th:field="*{materialsRequired}">
        </label>

        <label>Labour (hours):
            <input type="number" min="0" step="0.1" th:field="*{labourHours}">
        </label>

        <label>Amount:
            <input type="number" min="0" step="0.01" th:field="*{amount}">
        </label>

        <label>Breakdown Details:
            <textarea th:field="*{breakdown}" rows="3"></textarea>
        </label>

        <button type="submit">Save Record</button>
    </form>
</main>

<footer>
    <p>&copy; 2025 Synergeio Service Station</p>
</footer>
</body>
</html>


I have this controller : MvcController.java
package za.co.synergio.georgiou.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.*;
import za.co.synergio.georgiou.model.ServiceRecord;
import za.co.synergio.georgiou.storage.CsvStorage;

import java.io.IOException;
import java.math.BigDecimal;
import java.time.LocalDate;
import java.time.ZoneOffset;
import java.util.Collections;
import java.util.List;

@Controller
public class MvcController {

    private final CsvStorage csvStorage;

    @Autowired
    public MvcController(CsvStorage csvStorage) {
        this.csvStorage = csvStorage;
    }

    @GetMapping("/")
    public String form(Model model) {
        LocalDate utcDate = LocalDate.now(ZoneOffset.UTC);
        ServiceRecord record = new ServiceRecord();
        record.setDate(utcDate);
        model.addAttribute("serviceRecord", record);
        return "form";
    }

    @PostMapping("/submit")
    public String submit(@ModelAttribute ServiceRecord serviceRecord, BindingResult bindingResult, Model model)
            throws IOException {

        if (serviceRecord.getDate() == null)
            bindingResult.rejectValue("date", "date.empty", "Date is required");
        if (serviceRecord.getCustomerName() == null || serviceRecord.getCustomerName().isBlank())
            bindingResult.rejectValue("customerName", "name.empty", "Customer name is required");

        if (bindingResult.hasErrors()) {
            model.addAttribute("serviceRecord", serviceRecord);
            return "form";
        }

        if (serviceRecord.getAmount() == null)
            serviceRecord.setAmount(BigDecimal.ZERO);

        if (serviceRecord.getServiceDate() != null) {
            LocalDate today = LocalDate.now(ZoneOffset.UTC);
            int days = (int) today.until(serviceRecord.getServiceDate()).getDays();        	
            serviceRecord.setDaysLeftl(days);
        }
        
        
        if (serviceRecord.getInterval() > 0 && serviceRecord.getDate() != null) {
            LocalDate recurring = serviceRecord.getDate().plusDays(serviceRecord.getInterval());
            serviceRecord.setRecurringDate(recurring);
        }

        csvStorage.save(serviceRecord);
        return "redirect:/";
    }

    @GetMapping("/api/records")
    @ResponseBody
    public List<ServiceRecord> apiRecords() throws IOException {
        return csvStorage.readAll();
    }

    @GetMapping("/records")
    public String records(Model model) throws IOException {
        List<ServiceRecord> records = csvStorage.readAll();
        Collections.reverse(records);
        model.addAttribute("records", records);
        return "records";
    }
    
    @GetMapping("/40DAYS")
    public String records40Days(Model model) throws IOException {
        List<ServiceRecord> allRecords = csvStorage.readAll();
        
        // Filter records with daysLeft < 41
        List<ServiceRecord> filtered = allRecords.stream()
                .filter(r -> r.getDaysLeft() < 41 && r.getDaysLeft() >0)
                .toList();

        // Reverse so newest records appear first
        Collections.reverse(filtered);

        model.addAttribute("records", filtered);
        return "40days"; 
    }
    

    @GetMapping("/10DAYS")
    public String records10Days(Model model) throws IOException {
        List<ServiceRecord> allRecords = csvStorage.readAll();
        
        // Filter records with daysLeft < 41
        List<ServiceRecord> filtered = allRecords.stream()
                .filter(r -> r.getDaysLeft() < 11 && r.getDaysLeft() >0)
                .toList();

        // Reverse so newest records appear first
        Collections.reverse(filtered);

        model.addAttribute("records", filtered);
        return "10days"; 
    }
    
    @GetMapping("/today")
    public String recordsToday(Model model) throws IOException {
            List<ServiceRecord> allRecords = csvStorage.readAll();
            
            // Filter records with daysLeft < 41
            List<ServiceRecord> filtered = allRecords.stream()
                    .filter(r -> r.getDaysLeft() < 2 && r.getDaysLeft() >0)
                    .toList();

            // Reverse so newest records appear first
            Collections.reverse(filtered);

            model.addAttribute("records", filtered);
            return "today"; 
    }

    @GetMapping("/help")
    public String help() {
        return "help";
    }
    

}



I have form.js
document.addEventListener("DOMContentLoaded", () => {
  const form = document.querySelector(".service-form");
  if (!form) return;

  form.addEventListener("submit", (e) => {
    const date = form.querySelector("input[name='date']");
    const name = form.querySelector("input[name='customerName']");
    if (!date.value || !name.value.trim()) {
      e.preventDefault();
      alert("Please fill in required fields: Date and Customer Name");
    }
  });
});

## Changes needed

Make these two changes after DocumentType add two fields
private LocalDate serviceDate
private LocalDate recurringDate

change  private String interval default value =0
make it numeric  days
if it is not zero calculate by adding interval to date and put this value in recurringDate


synergeio.csv.path=/home/nickm/Documents/NikiforosRequirement/service_records.csv
synergeio.back.path=/home/nickm/Documents/NikiforosRequirement/service_records.backup
